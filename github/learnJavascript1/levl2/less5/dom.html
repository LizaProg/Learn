<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Поиск узлов в дереве документа</title>
    <style type="text/css">
        html {
            background: #f93;
            cursor: default;
        }

        html, input, button {
            font: 16px calibri, sans-serif;
        }

        div {
            margin: 0 0 20px;
            padding: 20px;
            border: 5px solid #ffc;
        }

        p {
            margin: 10px 0;
            background: #fff;
            padding: 10px;
        }
    </style>
    <script type="text/javascript">
        /*createDocumentFragment*/
        function f() {
            var i = document.createElement("em"); //создали  элемент
            i.appendChild(document.createTextNode("наклонный ")); //добавили узел
            var b = document.createElement("strong"); //создали  элемент
            b.appendChild(document.createTextNode("жирный ")); //добавили узел
            var t = document.createTextNode("текст"); //новый текстовый узел
            var br = document.createElement("br"); //Создает новый элемент с указанным тегом
            var f = document.createDocumentFragment();
            f.appendChild(i);
            f.appendChild(b);
            f.appendChild(t);
            f.appendChild(br);
            var d = document.getElementsByTagName("div"); //получили все дивы
            for (var i=0; i<d.length; i++)
                d[i].insertBefore(f.cloneNode(true), d[i].firstChild); //перед каждым дивом появится строка наклонный жирный текст

        }
    </script>
</head>
<body>
<div id="d">
    <p>Первый параграф</p>
    <p id="clickable">
        <a href="javascript:f();">Второй <b>кликабельный</b> параграф</a>
    </p>
    <p>Третий параграф</p>

</div>
<div>
    <p>Четвертый параграф</p>
    <p>Пятый параграф</p>
</div>
<p>Шестой параграф</p>
<p>Седьмой и последний параграф</p>
</body>
</html>

/*в консоли
1.var a = document.links[0](undefined)
2.a(откуда этот элемент)
3.a.parentNode(кто его родители)
4.a.parentNode.parentNode(родитель родителя)
5.var d = a.parentNode.parentNode
6.d(берем див)
7.d.childNodes.length(сколько детей у див)
8.d.childNodes(показать всех детей)
9.var p = d.childNodes[3]( нам нужен тэг p поэтому [3])
10.p (содержимое p)
11.p.firstChild(первый ребенок a)
12.p.firstChild.firstChild.nextSibling(сосед)
13.p.firstChild.firstChild.nextSibling.firstChild.nodeValue(сосед соседа)
14.a.textContent //выбирает текст на любой глубине (содержит только текст внутри элемента, за вычетом всех
тегов.)
    15.d
    16.d.getElementsByTagName("p") //выбрали всех детей у d с тэгом p
    17.
    */

/*создание узлов
    var d = document.getElementById("d") //выбрали элемент c id = d
    var p = document.createElement("p") //зоздали элемент р он в памяти
    var t = document.createTextNode("четвертый параграф") //написали в p четвертый праграф
    p.appendChild(t)//текст вкладываем в р
    d.appendChild(p) //добавили элемент p в документ из памяти

/*добавить узел в определенное место
    var p2 = document.getElementById("clickable") //нашли по id элемент clickable
    d.insertBefore(p, p2) //вставить р2 перед р
    var clonedP = p.cloneNode() //склонировали p (но склнировался только элемент без текста)
    var clonedP = p.clonedNode(true) //чтобы скопировать объект детьми нужен true
    d.appendChild(clonedP) //добавили элемент
    var p2 = d.removeChild(p2) // удалили из документа но он остается в памяти
    var x = d.replaceChild(p2, clonedP) //заментили объект clonedP на р

    */